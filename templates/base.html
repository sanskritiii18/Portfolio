<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sanskriti Verma Portfolio</title>

  <!-- Bootstrap + Icons + CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body data-bs-spy="scroll" data-bs-target=".navbar" data-bs-offset="80">
  <!-- Floating Background Elements -->
  <div class="floating-elements">
    <div class="floating-element" style="left: 10%; animation-delay: 0s;">
      <i class="fab fa-python" style="font-size: 3rem; color: var(--primary-color);"></i>
    </div>
    <div class="floating-element" style="left: 80%; animation-delay: 5s;">
      <i class="fab fa-js-square" style="font-size: 2.5rem; color: var(--accent-color);"></i>
    </div>
    <div class="floating-element" style="left: 50%; animation-delay: 10s;">
      <i class="fas fa-database" style="font-size: 2rem; color: var(--secondary-color);"></i>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#home">Sanskriti Verma</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#experience">Experience</a></li>
          <li class="nav-item"><a class="nav-link" href="#projects">Projects</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Home Section -->
  <section id="home" class="hero-section d-flex align-items-center">
    <div class="container">
      <div class="row align-items-center">
        <!-- Intro Text -->
        <div class="col-md-7 hero-text">
          <h5 class="text-muted mb-3" style="color: rgba(255,255,255,0.8) !important;">Hello, I'm</h5>
          <h1 class="display-4 mb-3">Sanskriti Verma</h1>
          <h4 class="mb-3 typing-animation">Python Developer</h4>
          <p class="lead mb-4">Backend & AI/ML Developer | FastAPI • Flask • PostgreSQL • MongoDB</p>

          <!-- Buttons -->
          <div class="d-flex flex-wrap gap-3 mb-4">
            <a href="{{ url_for('static', filename='sans_resume.pdf') }}" download class="btn-gradient">
              <i class="bi bi-file-earmark-person-fill me-2"></i>Resume
            </a>
            <a href="#contact" class="btn btn-outline-white">
              <i class="bi bi-envelope-fill me-2"></i>Contact Me
            </a>
          </div>

          <!-- Social Links -->
          <div class="social-icons">
            <a href="https://github.com/sanskritiii18" target="_blank">
              <i class="bi bi-github"></i>
            </a>
            <a href="https://www.linkedin.com/in/sanskriti-verma-462522215/" target="_blank">
              <i class="bi bi-linkedin"></i>
            </a>
          </div>
        </div>

        <!-- Profile Image -->
        <div class="col-md-5 text-center mt-4 mt-md-0">
          <div class="profile-container">
            <img src="{{ url_for('static', filename='mypic.jpg') }}"
                 class="profile-img"
                 alt="Sanskriti Verma">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Experience Section -->
  <section id="experience" class="section content-section">
    <div class="container">
      <h1 class="section-title text-center">Experience</h1>
      {% for exp in experiences %}
      <div class="experience-card card mb-4 {% if loop.index0 % 2 == 0 %}bg-light{% else %}bg-white{% endif %}">
        <div class="card-body p-4">
          <div class="row align-items-start">
            <div class="col-md-8">
              <h4 class="card-title text-primary mb-2">{{ exp.role }}</h4>
              <h6 class="card-subtitle mb-3 text-muted">
                <i class="fas fa-building me-2"></i>{{ exp.organization }}
              </h6>
              <p class="card-text mb-3">
                <i class="fas fa-calendar-alt me-2 text-primary"></i>
                <strong>Duration:</strong> {{ exp.duration }}
              </p>
            </div>
            <div class="col-md-4 text-end">
              <div class="mb-3">
                {% for tech in exp.technologies %}
                <span class="tech-badge">{{ tech }}</span>
                {% endfor %}
              </div>
            </div>
          </div>

          {% if exp.confidential %}
            <div class="alert alert-warning border-0" style="background: rgba(245, 158, 11, 0.1);">
              <i class="fas fa-lock me-2"></i>
              <em>Project details are confidential.</em>
            </div>
          {% else %}
            <div class="mt-4">
              <h6 class="text-primary mb-3">
                <i class="fas fa-tasks me-2"></i>Key Responsibilities:
              </h6>
              <div class="row">
                {% for task in exp.responsibilities %}
                <div class="col-md-6 mb-2">
                  <div class="d-flex align-items-start">
                    <i class="fas fa-chevron-right text-primary me-2 mt-1" style="font-size: 0.8rem;"></i>
                    <span>{{ task }}</span>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Projects Section -->
  <section id="projects" class="section" style="background: var(--light-bg);">
    <div class="container">
      <h1 class="section-title text-center">
        <i class="fas fa-rocket me-3" style="color: var(--accent-color);"></i>
        Projects Showcase
      </h1>

      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for p in projects %}
        <div class="col">
          <div class="project-card card h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center mb-3">
                <div class="icon-container me-3" style="width: 50px; height: 50px; background: linear-gradient(45deg, var(--primary-color), var(--accent-color)); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                  <i class="fas {{ p.icon }} text-white" style="font-size: 1.5rem;"></i>
                </div>
                <h5 class="card-title text-primary mb-0">{{ p.title }}</h5>
              </div>

              <p class="card-text flex-grow-1 text-muted">{{ p.desc }}</p>

              <div class="mb-4">
                {% for tech in p.tech %}
                  <span class="badge bg-light text-dark me-1 mb-1" style="border: 1px solid #e2e8f0;">{{ tech }}</span>
                {% endfor %}
              </div>

              <div class="mt-auto">
                <a href="{{ p.link }}" target="_blank" class="btn btn-outline-primary btn-sm w-100">
                  <i class="fab fa-github me-2"></i>View on GitHub
                </a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="section contact-section">
    <div class="container">
      <h1 class="section-title text-center text-white">Get In Touch</h1>
      <p class="text-center text-white-50 mb-5 lead">Let's discuss how we can work together</p>

      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="contact-form">
            <form id="contactForm" novalidate>
              {{ form.hidden_tag() }}

              <div class="row">
                <div class="col-md-6 mb-3">
                  {{ form.name.label(class="form-label") }}
                  {{ form.name(class="form-control", placeholder="Your Name") }}
                  <div class="invalid-feedback" id="name-error"></div>
                </div>

                <div class="col-md-6 mb-3">
                  {{ form.email.label(class="form-label") }}
                  {{ form.email(class="form-control", placeholder="your@email.com") }}
                  <div class="invalid-feedback" id="email-error"></div>
                </div>
              </div>

              <div class="mb-3">
                {{ form.subject.label(class="form-label") }}
                {{ form.subject(class="form-control", placeholder="Subject (optional)") }}
                <div class="invalid-feedback" id="subject-error"></div>
              </div>

              <div class="mb-4">
                {{ form.message.label(class="form-label") }}
                {{ form.message(class="form-control", rows="6", placeholder="Your message...") }}
                <div class="invalid-feedback" id="message-error"></div>
              </div>

              <div class="text-center">
                <button type="submit" class="btn-gradient" id="submitBtn" style="min-width: 200px;">
                  <span class="spinner-border spinner-border-sm me-2 d-none" id="spinner"></span>
                  <i class="fas fa-paper-plane me-2"></i>
                  Send Message
                </button>
              </div>

              <div id="alert-container" class="mt-4"></div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Typing animation effect
    const titles = ['Python Developer', 'Backend Engineer', 'AI/ML Developer', 'Full Stack Developer'];
    let titleIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typingElement = document.querySelector('.typing-animation');

    function typeAnimation() {
      const currentTitle = titles[titleIndex];

      if (isDeleting) {
        typingElement.textContent = currentTitle.substring(0, charIndex - 1);
        charIndex--;
      } else {
        typingElement.textContent = currentTitle.substring(0, charIndex + 1);
        charIndex++;
      }

      let delay = isDeleting ? 50 : 100;

      if (!isDeleting && charIndex === currentTitle.length) {
        delay = 2000;
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        titleIndex = (titleIndex + 1) % titles.length;
        delay = 500;
      }

      setTimeout(typeAnimation, delay);
    }

    // Start typing animation
    setTimeout(typeAnimation, 1000);

    // Enhanced navbar scroll effect
    window.addEventListener('scroll', function() {
      const navbar = document.querySelector('.navbar');
      if (window.scrollY > 50) {
        navbar.style.background = 'rgba(255, 255, 255, 0.98)';
        navbar.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
      } else {
        navbar.style.background = 'rgba(255, 255, 255, 0.95)';
        navbar.style.boxShadow = 'none';
      }
    });

    // Counter animation
    function animateCounters() {
      const counters = document.querySelectorAll('.stats-number');
      counters.forEach(counter => {
        const target = parseInt(counter.textContent.replace('+', ''));
        let current = 0;
        const increment = target / 100;
        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            counter.textContent = target + '+';
            clearInterval(timer);
          } else {
            counter.textContent = Math.floor(current) + '+';
          }
        }, 20);
      });
    }

    // Trigger counter animation when hero section is visible
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          animateCounters();
          observer.unobserve(entry.target);
        }
      });
    });

    observer.observe(document.querySelector('.hero-section'));

    // Handle contact form submission
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const submitBtn = document.getElementById('submitBtn');
      const spinner = document.getElementById('spinner');
      const alertContainer = document.getElementById('alert-container');

      // Show loading state
      submitBtn.disabled = true;
      spinner.classList.remove('d-none');

      // Clear previous errors
      document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
      document.querySelectorAll('.invalid-feedback').forEach(el => el.textContent = '');
      alertContainer.innerHTML = '';

      // Create FormData object
      const formData = new FormData(this);

      fetch('/contact', {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Show success message
          alertContainer.innerHTML = `
            <div class="alert alert-success alert-dismissible fade show border-0" role="alert" style="background: rgba(34, 197, 94, 0.2); color: #166534;">
              <h5 class="mb-2"><i class="fas fa-check-circle me-2"></i>Thank you for contacting me!</h5>
              <p class="mb-0">Will get back to you soon</p>
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          `;
          // Reset form
          document.getElementById('contactForm').reset();
        } else {
          if (data.errors) {
            // Show validation errors
            for (const [field, errors] of Object.entries(data.errors)) {
              const input = document.getElementById(field);
              const errorDiv = document.getElementById(`${field}-error`);
              if (input && errorDiv) {
                input.classList.add('is-invalid');
                errorDiv.textContent = errors.join(', ');
              }
            }
          } else {
            // Show general error message
            alertContainer.innerHTML = `
              <div class="alert alert-danger alert-dismissible fade show border-0" role="alert" style="background: rgba(239, 68, 68, 0.2); color: #dc2626;">
                <i class="fas fa-exclamation-triangle me-2"></i>
                ${data.message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
            `;
          }
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alertContainer.innerHTML = `
          <div class="alert alert-danger alert-dismissible fade show border-0" role="alert" style="background: rgba(239, 68, 68, 0.2); color: #dc2626;">
            <i class="fas fa-exclamation-triangle me-2"></i>
            Sorry, there was an error sending your message. Please try again.
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        `;
      })